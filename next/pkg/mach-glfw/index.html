<!doctype html><html><head><link rel=stylesheet href=https://machengine.org/next/layouts/default.9af34c83dd334eeaf345e328c050f5d9a522354e2a594ab12f46bd2032529363.css><link rel=apple-touch-icon sizes=180x180 href=https://machengine.org/next/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://machengine.org/next/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://machengine.org/next/favicon-16x16.png><link rel=manifest href=https://machengine.org/next/site.webmanifest><link rel=mask-icon href=https://machengine.org/next/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://machengine.org/next/assets/font/stylesheet.css><link rel=stylesheet href=https://machengine.org/next/assets/font/inter/inter.css><script async defer data-domain=hexops.com src=https://machengine.org/next/opendata.js></script><meta charset=utf-8><title>mach-glfw | Mach: zig game engine & graphics toolkit</title><link rel=canonical href=https://machengine.org/next/pkg/mach-glfw/><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noindex"><meta property="og:title" content="mach-glfw"><meta property="og:description" content="Perfected GLFW bindings for Zig, with 100% API coverage, zero-fuss installation, cross compilation, and more."><meta property="og:type" content="article"><meta property="og:url" content="https://machengine.org/next/pkg/mach-glfw/"><meta property="og:image" content="https://machengine.org/next/opengraph/template_hu102e162f47cb7d8ae9eb284939698b9d_62022_f6a56ce49542ca49715988094a55964e.png"><meta property="article:section" content="pkg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://machengine.org/next/opengraph/template_hu102e162f47cb7d8ae9eb284939698b9d_62022_f6a56ce49542ca49715988094a55964e.png"><meta name=twitter:title content="mach-glfw"><meta name=twitter:description content="Perfected GLFW bindings for Zig, with 100% API coverage, zero-fuss installation, cross compilation, and more."></head><body><div class=navbar><div class=content><a href=https://machengine.org/next/ class=logo><div class=img></div></a><div><a href=https://machengine.org/next/engine class=item>Engine</a>
<a href=https://machengine.org/next/core class=item>Core</a>
<a href=https://machengine.org/next/pkg class=item>Packages</a>
<a href=https://machengine.org/next/about class=item>Project</a><div style="width:0;height:100%;border-left:1px solid" class=color-border>&nbsp;</div><a href=https://devlog.hexops.com/categories/mach/ class=item>Devlog</a>
<a href=https://github.com/hexops/mach class=svg-item><img alt=GitHub class=svg-icon src=https://machengine.org/next/img/github.svg></a>
<a href=https://discord.gg/XNG3NZgCqp class=svg-item><img alt=Discord class=svg-icon src=https://machengine.org/next/img/discord.svg></a>
<a href=https://github.com/sponsors/slimsag class=donate-button><img alt=Heart class=svg-icon src=https://machengine.org/next/img/heart.svg>
&nbsp;Donate</a></div></div></div><div class="alert warning"><span><strong>HEY YOU!</strong> We're still working on this site, please don't share it in very public places :)</span></div><div id=content><link rel=stylesheet href=https://machengine.org/next/layouts/docs.a2978d86fe897d36c7156a89344e1c3c64909c3c94fc570946c0ca9508158892.css><main aria-role=main class=main-docs><aside><ul><li><a href=https://machengine.org/next/pkg><span>Packages overview</span></a></li><li><a href=https://machengine.org/next/pkg/c><span>C libraries / headers</span></a></li><li><h3><span>Pure Zig</span></h3></li><ul class=sub-menu><li><a href=https://machengine.org/next/pkg/mach-ecs>ecs</a></li><li><a href=https://machengine.org/next/pkg/mach-sysaudio>sysaudio</a></li><li><a href=https://machengine.org/next/pkg/mach-sysjs>sysjs</a></li><li><a href=https://machengine.org/next/pkg/mach-dusk>dusk</a></li><li><a href=https://machengine.org/next/pkg/mach-gamemode>gamemode</a></li><li><a href=https://machengine.org/next/pkg/mach-earcut>earcut</a></li><li><a href=https://machengine.org/next/pkg/mach-fastfilter>fastfilter</a></li></ul><li><h3><span>Bindings</span></h3></li><ul class=sub-menu><li><a href=https://machengine.org/next/pkg/mach-gpu>gpu</a></li><li><a href=https://machengine.org/next/pkg/mach-gpu-dawn>gpu-dawn</a></li><li><a href=https://machengine.org/next/pkg/mach-basisu>basisu</a></li><li><a href=https://machengine.org/next/pkg/mach-freetype>freetype</a></li><li><a href=https://machengine.org/next/pkg/mach-glfw>glfw</a></li><li><a href=https://machengine.org/next/pkg/mach-model3d>model3d</a></li><li><a href=https://machengine.org/next/pkg/mach-opus>opus</a></li><li><a href=https://machengine.org/next/pkg/mach-flac>flac</a></li></ul></ul></aside><div class=docs><div style=display:flex;flex-direction:column;justify-content:space-between;align-items:center><div style=display:flex;flex-direction:row;align-items:center><h1 style=margin-right:1rem>mach-glfw</h1><picture><source media="(prefers-color-scheme: dark)" srcset=https://machengine.org/next/assets/mach/glfw-icon-dark.svg><img alt=mach-gpu src=https://machengine.org/next/assets/mach/glfw-icon-light.svg style=width:5rem;margin-right:1rem;margin-top:.5rem></picture></div><a href=https://github.com/hexops/mach-glfw>GitHub repository</a><p>Perfected GLFW bindings for Zig, with 100% API coverage, zero-fuss installation, cross compilation, and more.</p></div><ul><li><a href=../../about/goals#zero-fuss-installation>Zero-fuss</a> installation, <a href=../../about/goals#seamless-cross-compilation>cross-compilation</a> at the flip of a switch, and <a href=../../about/platforms>broad platform support</a>.</li><li>100% API coverage. Every function, type, constant, etc. has been exposed in a ziggified API.</li></ul><h2 id=what-does-a-ziggified-glfw-api-offer>What does a ziggified GLFW API offer?</h2><ul><li><strong>Enums</strong>, always know what value a GLFW function can accept as everything is strictly typed. And use the nice Zig syntax to access enums, like <code>window.getKey(.escape)</code> instead of <code>c.glfwGetKey(window, c.GLFW_KEY_ESCAPE)</code></li><li>Slices instead of C pointers and lengths.</li><li>Generics, so you can just use <code>window.hint</code> instead of <code>glfwWindowHint</code>, <code>glfwWindowHintString</code>, etc.</li><li><a href=https://ziglang.org/documentation/master/#packed-struct>packed structs</a> represent bit masks, so you can use <code>if (joystick.down and joystick.right)</code> instead of <code>if (joystick & c.GLFW_HAT_DOWN and joystick & c.GLFW_HAT_RIGHT)</code>, etc.</li><li>Methods, e.g. <code>my_window.hint(...)</code> instead of <code>glfwWindowHint(my_window, ...)</code></li><li><code>true</code> and <code>false</code> instead of <code>c.GLFW_TRUE</code> and <code>c.GLFW_FALSE</code> constants.</li></ul><h2 id=how-do-i-use-opengl-vulkan-webgpu-etc-with-this>How do I use OpenGL, Vulkan, WebGPU, etc. with this?</h2><p>You&rsquo;ll need to bring your own library, e.g.:</p><ul><li>WebGPU: <a href=../mach-gpu>mach-gpu</a> (<a href=https://github.com/hexops/mach-gpu>example</a>)</li><li>Vulkan: <a href=https://github.com/Snektron/vulkan-zig>Snektron/vulkan-zig</a> or <a href=https://github.com/hexops/vulkan-zig-generated>hexops/vulkan-zig-generated</a> (<a href=https://github.com/hexops/mach-glfw-vulkan-example>example</a>)</li><li>OpenGL: <a href=https://github.com/ziglibs/zgl>ziglibs/zgl</a> (<a href=https://github.com/hexops/mach-glfw-opengl-example>example</a>)</li></ul><h2 id=getting-started>Getting started</h2><p>First <code>zig init-exe</code> to create a Zig project. Then you will need to create a new <code>build.zig.zon</code> file, and update your <code>build.zig</code> and <code>src/main.zig</code> files:</p><h3 id=buildzigzon>build.zig.zon</h3><p>mach-glfw uses the Zig package manager:</p><ol><li>Save mach-glfw&rsquo;s <a href=https://github.com/hexops/mach-glfw/blob/main/build.zig.zon>build.zig.zon</a> file in your project, next to your <code>build.zig.zon</code>. You can change the <code>.name</code> and <code>.version</code> to describe your project.</li><li>Open the <code>build.zig.zon</code> file and add a new <code>.mach_glfw</code> entry under <code>.dependencies</code>, e.g.:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zig data-lang=zig><span style=display:flex><span>.mach_glfw <span style=color:#f92672>=</span> .{
</span></span><span style=display:flex><span>    .url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://pkg.machengine.org/mach-glfw/4d59b4d4e24142d9fbb6ed742c6ba89918a00e63.tar.gz&#34;</span>,
</span></span><span style=display:flex><span>},
</span></span></code></pre></div><p>(change <code>$LATEST_COMMIT</code> to the actual latest mach-glfw commit hash.) Next, run <code>zig build</code> and the compiler will tell you to add a <code>.hash</code> entry next to the <code>.url</code>, follow its advice and copy+paste that next to the <code>.url</code>:</p><pre tabindex=0><code>note: expected .hash = &#34;12209838fcfb7a77d2d6931efdc7448c033a1b7dad11d082c94bbeeba9d1038cd311&#34;,
</code></pre><h3 id=buildzig>build.zig</h3><p>Add the following to your <code>build.zig</code> below your <code>const exe = b.addExecutable(...)</code> line:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zig data-lang=zig><span style=display:flex><span>    <span style=color:#75715e>// Use mach-glfw
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> glfw_dep <span style=color:#f92672>=</span> b.dependency(<span style=color:#e6db74>&#34;mach_glfw&#34;</span>, .{
</span></span><span style=display:flex><span>        .target <span style=color:#f92672>=</span> exe.target,
</span></span><span style=display:flex><span>        .optimize <span style=color:#f92672>=</span> exe.optimize,
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    exe.linkLibrary(glfw_dep.artifact(<span style=color:#e6db74>&#34;mach-glfw&#34;</span>));
</span></span><span style=display:flex><span>    exe.addModule(<span style=color:#e6db74>&#34;mach-glfw&#34;</span>, glfw_dep.module(<span style=color:#e6db74>&#34;mach-glfw&#34;</span>));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span> @import(<span style=color:#e6db74>&#34;mach_glfw&#34;</span>).link(b, exe);
</span></span></code></pre></div><h3 id=srcmainzig>src/main.zig</h3><p>Here&rsquo;s an example program to get you started:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zig data-lang=zig><span style=display:flex><span><span style=color:#66d9ef>const</span> std <span style=color:#f92672>=</span> @import(<span style=color:#e6db74>&#34;std&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> glfw <span style=color:#f92672>=</span> @import(<span style=color:#e6db74>&#34;mach-glfw&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/// Default GLFW error handling callback
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fn</span> errorCallback(error_code<span style=color:#f92672>:</span> glfw.ErrorCode, description<span style=color:#f92672>:</span> [<span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>]<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>u8</span>) <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>    std.log.err(<span style=color:#e6db74>&#34;glfw: {}: {s}</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, .{ error_code, description });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>fn</span> main() <span style=color:#f92672>!</span><span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>    glfw.setErrorCallback(errorCallback);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>glfw.init(.{})) {
</span></span><span style=display:flex><span>        std.log.err(<span style=color:#e6db74>&#34;failed to initialize GLFW: {?s}&#34;</span>, .{glfw.getErrorString()});
</span></span><span style=display:flex><span>        std.process.exit(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>defer</span> glfw.terminate();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Create our window
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> window <span style=color:#f92672>=</span> glfw.Window.create(<span style=color:#ae81ff>640</span>, <span style=color:#ae81ff>480</span>, <span style=color:#e6db74>&#34;Hello, mach-glfw!&#34;</span>, <span style=color:#66d9ef>null</span>, <span style=color:#66d9ef>null</span>, .{}) <span style=color:#66d9ef>orelse</span> {
</span></span><span style=display:flex><span>        std.log.err(<span style=color:#e6db74>&#34;failed to create GLFW window: {?s}&#34;</span>, .{glfw.getErrorString()});
</span></span><span style=display:flex><span>        std.process.exit(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>defer</span> window.destroy();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Wait for the user to close the window.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>while</span> (<span style=color:#f92672>!</span>window.shouldClose()) {
</span></span><span style=display:flex><span>        glfw.pollEvents();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=issues-questions>Issues? Questions?</h3><p>Triple-check you followed the <code>build.zig.zon</code> instructions correctly, it&rsquo;s easy to mess that part up.</p><p>Feel free to join the <a href=../../discord>Mach Discord community</a> for help.</p><h2 id=a-warning-about-error-handling>A warning about error handling</h2><p><strong>Unless the action you&rsquo;re performing is truly critical to your application continuing further, you should avoid terminating on GLFW errors and log them instead.</strong></p><p>Unfortunately, GLFW must return errors for <em>a large portion</em> of its functionality on some platforms, but especially for Wayland in particular. If you want your application to run well for most Linux users, you should e.g. merely log errors that are not critical.</p><p>Here is a rough list of functionality Wayland does not support:</p><ul><li><code>Window.setIcon</code></li><li><code>Window.setPos</code>, <code>Window.getPos</code></li><li><code>Window.iconify</code>, <code>Window.focus</code></li><li><code>Monitor.setGamma</code></li><li><code>Monitor.getGammaRamp</code>, <code>Monitor.setGammaRamp</code></li></ul><p>For example, <code>window.getPos()</code> will always return x=0, y=0 on Wayland due to lack of platform support.
Ignoring this error is a reasonable choice for most applications.
However, errors like this can still be caught and handled:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zig data-lang=zig><span style=display:flex><span><span style=color:#66d9ef>const</span> pos <span style=color:#f92672>=</span> window.getPos();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Option 1: convert a GLFW error into a Zig error.
</span></span></span><span style=display:flex><span><span style=color:#75715e>// Heed our warning about Wayland above, though!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>glfw.getErrorCode() <span style=color:#66d9ef>catch</span> <span style=color:#f92672>|</span>err<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>    std.log.err(<span style=color:#e6db74>&#34;failed to get window position: error={}&#34;</span>, .{err});
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> err; <span style=color:#75715e>// Or fall back to an alternative implementation.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Option 2: log a human-readable description of the error.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span> (glfw.getErrorString()) <span style=color:#f92672>|</span>description<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>    std.log.err(<span style=color:#e6db74>&#34;failed to get window position: {s}&#34;</span>, .{description});
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Option 3: use a combination of the above approaches.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span> (glfw.getError()) <span style=color:#f92672>|</span>err<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> error_code <span style=color:#f92672>=</span> err.error_code; <span style=color:#75715e>// Zig error
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> description <span style=color:#f92672>=</span> err.description; <span style=color:#75715e>// Human-readable description
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    std.log.err(<span style=color:#e6db74>&#34;failed to get window position: error={}: {s}&#34;</span>, .{error_code, description});
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>Note that the above example relies on GLFW&rsquo;s saved error being empty; otherwise, previously emitted errors may be mistaken for an error caused by <code>window.getPos()</code>.</p><p>If your application frequently ignores errors, it may be necessary to call <code>glfw.clearError()</code> or <code>defer glfw.clearError()</code> to ensure a clean slate for future error handling.</p><h2 id=glfw-version>GLFW version</h2><p>We generally follow the latest <code>master</code> version of GLFW, as recorded <a href=https://github.com/hexops/glfw>here</a>, as this allows us to work with the GLFW author to fix e.g. undefined behavior that Zig catches, and benefit from the latest & greatest changes - such as runtime X11/Wayland switching recently.</p></div><div class=toc><h3>Table of contents</h3><nav id=TableOfContents><ul><li><a href=#what-does-a-ziggified-glfw-api-offer>What does a ziggified GLFW API offer?</a></li><li><a href=#how-do-i-use-opengl-vulkan-webgpu-etc-with-this>How do I use OpenGL, Vulkan, WebGPU, etc. with this?</a></li><li><a href=#getting-started>Getting started</a><ul><li><a href=#buildzigzon>build.zig.zon</a></li><li><a href=#buildzig>build.zig</a></li><li><a href=#srcmainzig>src/main.zig</a></li><li><a href=#issues-questions>Issues? Questions?</a></li></ul></li><li><a href=#a-warning-about-error-handling>A warning about error handling</a></li><li><a href=#glfw-version>GLFW version</a></li></ul></nav></div></main><div class=footer><a href=https://hexops.com/privacy>Privacy matters</a><p><a href=https://machengine.org/next/about#improve-this-site>Improve this site</a> | <a href=https://github.com/sponsors/slimsag>Sponsor on GitHub</a> | <a href=https://devlog.hexops.com/>Hexops' devlog</a></p></div></div></body></html>