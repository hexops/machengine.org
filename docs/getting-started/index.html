<!doctype html><html><head><link rel=stylesheet href=https://machengine.org/layouts/default.bb15466819d3fbaf312db7ece8726d7131ba9ed50eeb5e347de909b3f0b89c48.css><link rel=apple-touch-icon sizes=180x180 href=https://machengine.org//apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://machengine.org//favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://machengine.org//favicon-16x16.png><link rel=manifest href=https://machengine.org//site.webmanifest><link rel=mask-icon href=https://machengine.org//safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://machengine.org//assets/font/stylesheet.css><link rel=stylesheet href=https://machengine.org//assets/font/inter/inter.css><script async defer data-domain=hexops.com src=https://machengine.org//opendata.js></script><meta charset=utf-8><title>Getting started | Mach: zig game engine & graphics toolkit</title><link rel=canonical href=https://machengine.org/docs/getting-started/><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Getting started"><meta property="og:description" content="Getting started using Mach"><meta property="og:type" content="article"><meta property="og:url" content="https://machengine.org/docs/getting-started/"><meta property="og:image" content="https://machengine.org/opengraph/template_hu102e162f47cb7d8ae9eb284939698b9d_62022_b8af5a8bf7d3fb82a13e0b67f825612d.png"><meta property="article:section" content="docs"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://machengine.org/opengraph/template_hu102e162f47cb7d8ae9eb284939698b9d_62022_b8af5a8bf7d3fb82a13e0b67f825612d.png"><meta name=twitter:title content="Getting started"><meta name=twitter:description content="Getting started using Mach"></head><body><div class=navbar><div class=content><a href=https://machengine.org// class=logo><div class=img></div></a><div class=subsection><a href=https://machengine.org//docs class=item>Docs</a>
<a href=https://machengine.org//about class=item>Project</a></div><div class="divider color-border">&nbsp;</div><div class=subsection><a href=https://devlog.hexops.com/categories/mach/ class=item>Devlog</a>
<a href=https://github.com/hexops/mach class=svg-item><img alt=GitHub class=svg-icon src=https://machengine.org//img/github.svg></a>
<a href=https://discord.gg/XNG3NZgCqp class=svg-item><img alt=Discord class=svg-icon src=https://machengine.org//img/discord.svg></a>
<a href=https://github.com/sponsors/slimsag class=donate-button><img alt=Heart class=svg-icon src=https://machengine.org//img/heart.svg>
&nbsp;Donate</a></div></div></div><div id=content><link rel=stylesheet href=https://machengine.org/layouts/docs.145a7d0caf5b3345083bed4fb10383d5bbda5c3cfd5a83cc7a153b0afbd8b2eb.css><main aria-role=main class=main-docs><aside><ul><li><a href=https://machengine.org/docs><span>Overview</span></a></li><li><a href=https://machengine.org/docs/getting-started><span>Getting started</span></a></li><li><h3><span>Object system</span></h3></li><ul class=sub-menu><li><a href=https://machengine.org/docs/object>Overview</a></li><li><a href=https://machengine.org/docs/object/modules>Modules</a></li><li><a href=https://machengine.org/docs/object/systems>Systems</a></li><li><a href=https://machengine.org/docs/object/objects>Objects</a></li><li><a href=https://machengine.org/docs/object/relations>Relations</a></li></ul><li><h3><span>Math</span></h3></li><ul class=sub-menu><li><a href=https://machengine.org/docs/math>Overview</a></li><li><a href=https://machengine.org/docs/math/coordinate-system>Coordinate system</a></li><li><a href=https://machengine.org/docs/math/traversing-coordinate-systems>Traversing coordinate systems</a></li><li><a href=https://machengine.org/docs/math/matrix-storage>Matrix storage</a></li></ul><li><h3><span>GPU</span></h3></li><ul class=sub-menu><li><a href=https://machengine.org/docs/gpu>Overview</a></li><li><a href=https://machengine.org/docs/gpu/memory>Memory management</a></li><li><a href=https://machengine.org/docs/gpu/errors>Error handling</a></li></ul><li><h3><span>General</span></h3></li><ul class=sub-menu><li><a href=https://machengine.org/docs/roadmap>Roadmap</a></li><li><a href=https://machengine.org/docs/modularity>Modularity</a></li><li><a href=https://machengine.org/docs/stdlib>Standard library</a></li><li><a href=https://machengine.org/docs/zig-version>Zig version</a></li><li><a href=https://machengine.org/docs/nominated-zig>Nominated Zig</a></li></ul></ul></aside><div class=docs><div class=color-bg style=align-self:center><p style="max-width:39rem;border-left:2px solid #000;border-right:2px solid #000;text-align:center;padding:.5rem!important;margin-top:0;background:#8a3535;padding:1rem">Mach is in <a href=https://machengine.org/about/faq/#experimental>early-stages of development.</a></p></div><h1 id=getting-started-using-mach>Getting Started using Mach</h1><h2 id=initialize-your-zig-project>Initialize your Zig project</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>zig init
</span></span></code></pre></div><p>Delete the <code>build.zig</code> file and <code>src/</code> files it created, we won&rsquo;t need them.</p><h2 id=add-mach-dependency-to-buildzigzon>Add Mach dependency to <code>build.zig.zon</code></h2><pre><code id=zig-fetch-main>zig fetch --save https://pkg.machengine.org/mach/$LATEST_COMMIT.tar.gz
</code></pre><script>fetch("https://api.github.com/repos/hexops/mach/branches/main",{method:"GET",headers:{Accept:"application/json"}}).then(e=>e.json()).then(e=>{let t=document.querySelector("#zig-fetch-main");t.innerHTML=t.innerHTML.replace("$LATEST_COMMIT",e.commit.sha)})</script><h2 id=create-your-buildzig-file>Create your <code>build.zig</code> file</h2><p>A basic <code>build.zig</code> file for use with Mach looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zig data-lang=zig><span style=display:flex><span><span style=color:#66d9ef>const</span> std <span style=color:#f92672>=</span> @import(<span style=color:#e6db74>&#34;std&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>fn</span> build(b<span style=color:#f92672>:</span> <span style=color:#f92672>*</span>std.Build) <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> target <span style=color:#f92672>=</span> b.standardTargetOptions(.{});
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> optimize <span style=color:#f92672>=</span> b.standardOptimizeOption(.{});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Create our Mach app module, where all our code lives.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> app_mod <span style=color:#f92672>=</span> b.createModule(.{
</span></span><span style=display:flex><span>        .root_source_file <span style=color:#f92672>=</span> b.path(<span style=color:#e6db74>&#34;src/App.zig&#34;</span>),
</span></span><span style=display:flex><span>        .optimize <span style=color:#f92672>=</span> optimize,
</span></span><span style=display:flex><span>        .target <span style=color:#f92672>=</span> target,
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Add Mach import to our app.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> mach_dep <span style=color:#f92672>=</span> b.dependency(<span style=color:#e6db74>&#34;mach&#34;</span>, .{
</span></span><span style=display:flex><span>        .target <span style=color:#f92672>=</span> target,
</span></span><span style=display:flex><span>        .optimize <span style=color:#f92672>=</span> optimize,
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    app_mod.addImport(<span style=color:#e6db74>&#34;mach&#34;</span>, mach_dep.module(<span style=color:#e6db74>&#34;mach&#34;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Have Mach create the executable for us
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> exe <span style=color:#f92672>=</span> @import(<span style=color:#e6db74>&#34;mach&#34;</span>).addExecutable(mach_dep.builder, .{
</span></span><span style=display:flex><span>        .name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;hello-world&#34;</span>,
</span></span><span style=display:flex><span>        .app <span style=color:#f92672>=</span> app_mod,
</span></span><span style=display:flex><span>        .target <span style=color:#f92672>=</span> target,
</span></span><span style=display:flex><span>        .optimize <span style=color:#f92672>=</span> optimize,
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    b.installArtifact(exe);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Run the app when `zig build run` is invoked
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> run_cmd <span style=color:#f92672>=</span> b.addRunArtifact(exe);
</span></span><span style=display:flex><span>    run_cmd.step.dependOn(b.getInstallStep());
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (b.args) <span style=color:#f92672>|</span>args<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>        run_cmd.addArgs(args);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> run_step <span style=color:#f92672>=</span> b.step(<span style=color:#e6db74>&#34;run&#34;</span>, <span style=color:#e6db74>&#34;Run the app&#34;</span>);
</span></span><span style=display:flex><span>    run_step.dependOn(<span style=color:#f92672>&amp;</span>run_cmd.step);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Run tests when `zig build test` is run
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> app_unit_tests <span style=color:#f92672>=</span> b.addTest(.{
</span></span><span style=display:flex><span>        .root_module <span style=color:#f92672>=</span> app_mod,
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> run_app_unit_tests <span style=color:#f92672>=</span> b.addRunArtifact(app_unit_tests);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> test_step <span style=color:#f92672>=</span> b.step(<span style=color:#e6db74>&#34;test&#34;</span>, <span style=color:#e6db74>&#34;Run unit tests&#34;</span>);
</span></span><span style=display:flex><span>    test_step.dependOn(<span style=color:#f92672>&amp;</span>run_app_unit_tests.step);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=create-your-srcappzig-file>Create your <code>src/App.zig</code> file</h2><p>This is where all our program code lives, it will render a triangle:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zig data-lang=zig><span style=display:flex><span><span style=color:#66d9ef>const</span> std <span style=color:#f92672>=</span> @import(<span style=color:#e6db74>&#34;std&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> mach <span style=color:#f92672>=</span> @import(<span style=color:#e6db74>&#34;mach&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> gpu <span style=color:#f92672>=</span> mach.gpu;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> App <span style=color:#f92672>=</span> @This();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// The set of Mach modules our application may use.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>const</span> Modules <span style=color:#f92672>=</span> mach.Modules(.{
</span></span><span style=display:flex><span>    mach.Core,
</span></span><span style=display:flex><span>    App,
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>const</span> mach_module <span style=color:#f92672>=</span> .app;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>const</span> mach_systems <span style=color:#f92672>=</span> .{ .main, .init, .tick, .deinit };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>const</span> main <span style=color:#f92672>=</span> mach.schedule(.{
</span></span><span style=display:flex><span>    .{ mach.Core, .init },
</span></span><span style=display:flex><span>    .{ App, .init },
</span></span><span style=display:flex><span>    .{ mach.Core, .main },
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>window<span style=color:#f92672>:</span> mach.ObjectID,
</span></span><span style=display:flex><span>title_timer<span style=color:#f92672>:</span> mach.time.Timer,
</span></span><span style=display:flex><span>pipeline<span style=color:#f92672>:</span> <span style=color:#f92672>*</span>gpu.RenderPipeline,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>fn</span> init(
</span></span><span style=display:flex><span>    core<span style=color:#f92672>:</span> <span style=color:#f92672>*</span>mach.Core,
</span></span><span style=display:flex><span>    app<span style=color:#f92672>:</span> <span style=color:#f92672>*</span>App,
</span></span><span style=display:flex><span>    app_mod<span style=color:#f92672>:</span> mach.Mod(App),
</span></span><span style=display:flex><span>) <span style=color:#f92672>!</span><span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>    core.on_tick <span style=color:#f92672>=</span> app_mod.id.tick;
</span></span><span style=display:flex><span>    core.on_exit <span style=color:#f92672>=</span> app_mod.id.deinit;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> window <span style=color:#f92672>=</span> <span style=color:#66d9ef>try</span> core.windows.new(.{
</span></span><span style=display:flex><span>        .title <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;core-triangle&#34;</span>,
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Store our render pipeline in our module&#39;s state, so we can access it later on.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    app.<span style=color:#f92672>*</span> <span style=color:#f92672>=</span> .{
</span></span><span style=display:flex><span>        .window <span style=color:#f92672>=</span> window,
</span></span><span style=display:flex><span>        .title_timer <span style=color:#f92672>=</span> <span style=color:#66d9ef>try</span> mach.time.Timer.start(),
</span></span><span style=display:flex><span>        .pipeline <span style=color:#f92672>=</span> <span style=color:#66d9ef>undefined</span>,
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> setupPipeline(core<span style=color:#f92672>:</span> <span style=color:#f92672>*</span>mach.Core, app<span style=color:#f92672>:</span> <span style=color:#f92672>*</span>App, window_id<span style=color:#f92672>:</span> mach.ObjectID) <span style=color:#f92672>!</span><span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> window <span style=color:#f92672>=</span> core.windows.getValue(window_id);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>defer</span> core.windows.setValueRaw(window_id, window);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Create our shader module
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> shader_module <span style=color:#f92672>=</span> window.device.createShaderModuleWGSL(<span style=color:#e6db74>&#34;shader.wgsl&#34;</span>, @embedFile(<span style=color:#e6db74>&#34;shader.wgsl&#34;</span>));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>defer</span> shader_module.release();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Blend state describes how rendered colors get blended
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> blend <span style=color:#f92672>=</span> gpu.BlendState{};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Color target describes e.g. the pixel format of the window we are rendering to.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> color_target <span style=color:#f92672>=</span> gpu.ColorTargetState{
</span></span><span style=display:flex><span>        .format <span style=color:#f92672>=</span> window.framebuffer_format,
</span></span><span style=display:flex><span>        .blend <span style=color:#f92672>=</span> <span style=color:#f92672>&amp;</span>blend,
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Fragment state describes which shader and entrypoint to use for rendering fragments.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> fragment <span style=color:#f92672>=</span> gpu.FragmentState.init(.{
</span></span><span style=display:flex><span>        .module <span style=color:#f92672>=</span> shader_module,
</span></span><span style=display:flex><span>        .entry_point <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;frag_main&#34;</span>,
</span></span><span style=display:flex><span>        .targets <span style=color:#f92672>=</span> <span style=color:#f92672>&amp;</span>.{color_target},
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Create our render pipeline that will ultimately get pixels onto the screen.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> label <span style=color:#f92672>=</span> @tagName(mach_module) <span style=color:#f92672>++</span> <span style=color:#e6db74>&#34;.init&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> pipeline_descriptor <span style=color:#f92672>=</span> gpu.RenderPipeline.Descriptor{
</span></span><span style=display:flex><span>        .label <span style=color:#f92672>=</span> label,
</span></span><span style=display:flex><span>        .fragment <span style=color:#f92672>=</span> <span style=color:#f92672>&amp;</span>fragment,
</span></span><span style=display:flex><span>        .vertex <span style=color:#f92672>=</span> gpu.VertexState{
</span></span><span style=display:flex><span>            .module <span style=color:#f92672>=</span> shader_module,
</span></span><span style=display:flex><span>            .entry_point <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;vertex_main&#34;</span>,
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>    app.pipeline <span style=color:#f92672>=</span> window.device.createRenderPipeline(<span style=color:#f92672>&amp;</span>pipeline_descriptor);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>fn</span> tick(app<span style=color:#f92672>:</span> <span style=color:#f92672>*</span>App, core<span style=color:#f92672>:</span> <span style=color:#f92672>*</span>mach.Core) <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (core.nextEvent()) <span style=color:#f92672>|</span>event<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>switch</span> (event) {
</span></span><span style=display:flex><span>            .window_open <span style=color:#f92672>=&gt;</span> <span style=color:#f92672>|</span>ev<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>try</span> setupPipeline(core, app, ev.window_id);
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            .close <span style=color:#f92672>=&gt;</span> core.exit(),
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>else</span> <span style=color:#f92672>=&gt;</span> {},
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> window <span style=color:#f92672>=</span> core.windows.getValue(app.window);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Grab the back buffer of the swapchain
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> back_buffer_view <span style=color:#f92672>=</span> window.swap_chain.getCurrentTextureView().<span style=color:#f92672>?</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>defer</span> back_buffer_view.release();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Create a command encoder
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> label <span style=color:#f92672>=</span> @tagName(mach_module) <span style=color:#f92672>++</span> <span style=color:#e6db74>&#34;.tick&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> encoder <span style=color:#f92672>=</span> window.device.createCommandEncoder(<span style=color:#f92672>&amp;</span>.{ .label <span style=color:#f92672>=</span> label });
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>defer</span> encoder.release();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Begin render pass
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> sky_blue_background <span style=color:#f92672>=</span> gpu.Color{ .r <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.776</span>, .g <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.988</span>, .b <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>, .a <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> };
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> color_attachments <span style=color:#f92672>=</span> [_]gpu.RenderPassColorAttachment{.{
</span></span><span style=display:flex><span>        .view <span style=color:#f92672>=</span> back_buffer_view,
</span></span><span style=display:flex><span>        .clear_value <span style=color:#f92672>=</span> sky_blue_background,
</span></span><span style=display:flex><span>        .load_op <span style=color:#f92672>=</span> .clear,
</span></span><span style=display:flex><span>        .store_op <span style=color:#f92672>=</span> .store,
</span></span><span style=display:flex><span>    }};
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> render_pass <span style=color:#f92672>=</span> encoder.beginRenderPass(<span style=color:#f92672>&amp;</span>gpu.RenderPassDescriptor.init(.{
</span></span><span style=display:flex><span>        .label <span style=color:#f92672>=</span> label,
</span></span><span style=display:flex><span>        .color_attachments <span style=color:#f92672>=</span> <span style=color:#f92672>&amp;</span>color_attachments,
</span></span><span style=display:flex><span>    }));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>defer</span> render_pass.release();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Draw
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    render_pass.setPipeline(app.pipeline);
</span></span><span style=display:flex><span>    render_pass.draw(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Finish render pass
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    render_pass.end();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Submit our commands to the queue
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>var</span> command <span style=color:#f92672>=</span> encoder.finish(<span style=color:#f92672>&amp;</span>.{ .label <span style=color:#f92672>=</span> label });
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>defer</span> command.release();
</span></span><span style=display:flex><span>    window.queue.submit(<span style=color:#f92672>&amp;</span>[_]<span style=color:#f92672>*</span>gpu.CommandBuffer{command});
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>fn</span> deinit(app<span style=color:#f92672>:</span> <span style=color:#f92672>*</span>App) <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>    app.pipeline.release();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=create-your-srcshaderwgsl-program>Create your <code>src/shader.wgsl</code> program</h2><p>This is the fragment and vertex GPU shader used to render the triangle:</p><pre tabindex=0><code class=language-wgsl data-lang=wgsl>@vertex fn vertex_main(
    @builtin(vertex_index) VertexIndex : u32
) -&gt; @builtin(position) vec4&lt;f32&gt; {
    var pos = array&lt;vec2&lt;f32&gt;, 3&gt;(
        vec2&lt;f32&gt;( 0.0,  0.5),
        vec2&lt;f32&gt;(-0.5, -0.5),
        vec2&lt;f32&gt;( 0.5, -0.5)
    );
    return vec4&lt;f32&gt;(pos[VertexIndex], 0.0, 1.0);
}

@fragment fn frag_main() -&gt; @location(0) vec4&lt;f32&gt; {
    return vec4&lt;f32&gt;(1.0, 0.0, 0.0, 1.0);
}
</code></pre><h2 id=build-and-run>Build and run</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>zig build run
</span></span></code></pre></div><p>This will open a window and display a triangle:</p><p><img src=https://machengine.org/example/core-triangle.png alt></p><h2 id=run-tests>Run tests</h2><p>If you later decide to add any Zig <code>test</code> blocks to your <code>src/App.zig</code>, you can run them using <code>zig build test</code>.</p><h2 id=cross-compile>Cross-compile</h2><p>You can cross-compile this program to any major desktop OS using the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#75715e># Linux</span>
</span></span><span style=display:flex><span>zig build -Dtarget<span style=color:#f92672>=</span>x86_64-linux-gnu
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># macOS (Apple Silicon)</span>
</span></span><span style=display:flex><span>zig build -Dtarget<span style=color:#f92672>=</span>aarch64-macos
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Windows</span>
</span></span><span style=display:flex><span>zig build -Dtarget<span style=color:#f92672>=</span>x86_64-windows-gnu
</span></span></code></pre></div><p>(the output will be in <code>zig-out/bin/</code>)</p><h2 id=continue-learning>Continue learning</h2><p>From here, you can <a href=https://github.com/hexops/mach/tree/main/examples>explore more examples</a> or read about <a href=https://machengine.org/docs/object/>the object systems</a> which is the foundation of every Mach API.</p></div><div class=toc><h3>Table of contents</h3><nav id=TableOfContents><ul><li><a href=#initialize-your-zig-project>Initialize your Zig project</a></li><li><a href=#add-mach-dependency-to-buildzigzon>Add Mach dependency to <code>build.zig.zon</code></a></li><li><a href=#create-your-buildzig-file>Create your <code>build.zig</code> file</a></li><li><a href=#create-your-srcappzig-file>Create your <code>src/App.zig</code> file</a></li><li><a href=#create-your-srcshaderwgsl-program>Create your <code>src/shader.wgsl</code> program</a></li><li><a href=#build-and-run>Build and run</a></li><li><a href=#run-tests>Run tests</a></li><li><a href=#cross-compile>Cross-compile</a></li><li><a href=#continue-learning>Continue learning</a></li></ul></nav></div></main><div class=footer><a href=https://hexops.com/privacy>Privacy matters</a><p><a href=https://github.com/hexops/machengine.org/archive/refs/heads/gh-pages.zip>offline version of this site</a> | <a href=https://machengine.org//about#improve-this-site>Improve this site</a> | <a href=https://github.com/sponsors/slimsag>Sponsor on GitHub</a> | <a href=https://devlog.hexops.com/>Hexops' devlog</a></p></div></div></body></html>