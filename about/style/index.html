<!doctype html><html><head><link rel=stylesheet href=https://machengine.org/layouts/default.1b9540ff392b51b0b809690caf746c7ec39a7048990a55170087510406bf5e62.css><link rel=apple-touch-icon sizes=180x180 href=https://machengine.org//apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://machengine.org//favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://machengine.org//favicon-16x16.png><link rel=manifest href=https://machengine.org//site.webmanifest><link rel=mask-icon href=https://machengine.org//safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://machengine.org//assets/font/stylesheet.css><link rel=stylesheet href=https://machengine.org//assets/font/inter/inter.css><script async defer data-domain=hexops.com src=https://machengine.org//opendata.js></script><meta charset=utf-8><title>Style guide | Mach: zig game engine & graphics toolkit</title><link rel=canonical href=https://machengine.org/about/style/><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Style guide"><meta property="og:description" content="The Mach code style guide; Fast doesn't mean reckless, we follow these rules to keep our code readable and high-quality."><meta property="og:type" content="article"><meta property="og:url" content="https://machengine.org/about/style/"><meta property="og:image" content="https://machengine.org/opengraph/template_hu102e162f47cb7d8ae9eb284939698b9d_62022_621143fb5d873660f6ad24f28f1ba0f1.png"><meta property="article:section" content="about"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://machengine.org/opengraph/template_hu102e162f47cb7d8ae9eb284939698b9d_62022_621143fb5d873660f6ad24f28f1ba0f1.png"><meta name=twitter:title content="Style guide"><meta name=twitter:description content="The Mach code style guide; Fast doesn't mean reckless, we follow these rules to keep our code readable and high-quality."></head><body><div class=navbar><div class=content><a href=https://machengine.org// class=logo><div class=img></div></a><div class=subsection><a href=https://machengine.org//engine class=item>Engine</a>
<a href=https://machengine.org//core class=item>Core</a>
<a href=https://machengine.org//pkg class=item>Packages</a>
<a href=https://machengine.org//about class=item>Project</a></div><div class="divider color-border">&nbsp;</div><div class=subsection><a href=https://devlog.hexops.com/categories/mach/ class=item>Devlog</a>
<a href=https://github.com/hexops/mach class=svg-item><img alt=GitHub class=svg-icon src=https://machengine.org//img/github.svg></a>
<a href=https://discord.gg/XNG3NZgCqp class=svg-item><img alt=Discord class=svg-icon src=https://machengine.org//img/discord.svg></a>
<a href=https://github.com/sponsors/slimsag class=donate-button><img alt=Heart class=svg-icon src=https://machengine.org//img/heart.svg>
&nbsp;Donate</a></div></div></div><div class=alert><span><strong>Mach v0.2 has been released!</strong> For all the details check out <a href=https://devlog.hexops.com/2023/mach-v0.2-released/>the announcement</a></span></div><div id=content><link rel=stylesheet href=https://machengine.org/layouts/docs.1c549ac5e9eaa1dc4997cd957caa9afec046a45d465b64074e1ec4f88737dd7b.css><main aria-role=main class="main-docs with-alert"><aside><ul><li><a href=https://machengine.org/about><span>About the project</span></a></li><li><a href=https://machengine.org/about/goals><span>Project goals</span></a></li><li><a href=https://machengine.org/about/platforms><span>Platform support</span></a></li><li><a href=https://machengine.org/about/zig-version><span>Zig version</span></a></li><li><a href=https://machengine.org/about/known-issues><span>Known issues</span></a></li><li><a href=https://machengine.org/about/stability><span>Stability</span></a></li><li><a href=https://machengine.org/about/style><span>Style guide</span></a></li><li><a href=https://machengine.org/about/faq><span>FAQ</span></a></li><li><h3><span>Key components</span></h3></li><ul class=sub-menu><li><a href=https://machengine.org/engine>Engine ⮕</a></li><li><a href=https://machengine.org/core>Core ⮕</a></li><li><a href=https://machengine.org/pkg>Packages ⮕</a></li></ul></ul></aside><div class=docs><h1 id=mach-code-style-guide>Mach code style guide</h1><h2 id=use-machtesting-where-applicable>Use <code>mach.testing</code> where applicable</h2><p>In the <a href=https://github.com/hexops/mach>main Mach repository</a> we have the <a href=https://github.com/hexops/mach/blob/main/src/testing.zig><code>mach.testing</code></a> module, which provides alternatives to <code>std.testing</code> equality methods with:</p><ul><li>Less <a href=https://github.com/ziglang/zig/issues/4437>ambiguity about order of parameters</a></li><li>Approximate absolute float equality by default</li><li>Handling of vector and matrix types</li></ul><p>You should use <code>mach.testing</code> wherever it is accessible (without pulling in an additional dependency.)</p><h2 id=usingnamespace-is-banned><code>usingnamespace</code> is banned</h2><p><code>usingnamespace</code> in general is banned from use in Mach code, because it allows one to &lsquo;mixin&rsquo; namespaces and tends to produce increasingly worse code quality over time. See e.g. <a href=https://github.com/ziglang/zig/pull/9618>ziglang/zig#9618</a>, <a href=https://github.com/hexops/mach/issues/796>hexops/mach#396</a></p><p>We&rsquo;ve successfully banished <code>usingnamespace</code> in general, and have yet to encounter a single instance where removing it did not improve code quality & lead to better / more legible layout of code.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zig data-lang=zig><span style=display:flex><span><span style=color:#75715e>// This is prohibited!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>usingnamespace</span> @import(<span style=color:#e6db74>&#34;foo.zig&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// This is allowed
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>const</span> bar <span style=color:#f92672>=</span> @import(<span style=color:#e6db74>&#34;foo.zig&#34;</span>).bar;
</span></span><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>const</span> baz <span style=color:#f92672>=</span> @import(<span style=color:#e6db74>&#34;foo.zig&#34;</span>).baz;
</span></span><span style=display:flex><span><span style=color:#75715e>// ...
</span></span></span></code></pre></div><p>If you find that writing all of the <code>pub const y = x.y</code> is too tedious, and you&rsquo;re doing it 50+ times or something - that is a golden signal that your code layout is poor and you should move <code>y</code> directly into whatever file you are writing <code>pub const y = x.y</code> in.</p><p><strong>Exception:</strong> Sometimes you really, genuinely do require a way to express a comptime struct mixin. This is only applicable when you are trying to e.g. create structs at comptime, not when trying to structure code. These cases should be extraordinarily rare. For example, mach-core requires <a href=https://github.com/hexops/mach-core/blob/50930539c32630b8054ecd48b443c7e336780da4/src/platform/native/main.zig#L6-L7>one such usage</a> because of magic <code>@import("root")</code> usages to configure e.g. logging in the Zig standard library.</p><h2 id=test-names-should-be-snake_case-and-descriptive>Test names should be snake_case and descriptive</h2><p>Do this:</p><pre tabindex=0><code>test &#34;vec_dot&#34; { ... }
test &#34;vec_dot_zero_inputs&#34; { ... }
</code></pre><p>Not this:</p><pre tabindex=0><code>test &#34;vec.dot&#34; { ... }
test &#34;vec.dot(0)&#34; { ... }
</code></pre><h2 id=tests-should-be-small-and-contain-a-single-test-only>Tests should be small and contain a single test only</h2><p>Do this:</p><pre tabindex=0><code>test &#34;vec_dot&#34; {
    // test 1
}
test &#34;vec_dot_zero_inputs&#34; {
    // test 2
}
</code></pre><p>Not this:</p><pre tabindex=0><code>test &#34;vec.dot&#34; {
    {
        // test 1
    }
    {
        // test 2
    }
}
</code></pre></div><div class=toc><h3>Table of contents</h3><nav id=TableOfContents><ul><li><a href=#use-machtesting-where-applicable>Use <code>mach.testing</code> where applicable</a></li><li><a href=#usingnamespace-is-banned><code>usingnamespace</code> is banned</a></li><li><a href=#test-names-should-be-snake_case-and-descriptive>Test names should be snake_case and descriptive</a></li><li><a href=#tests-should-be-small-and-contain-a-single-test-only>Tests should be small and contain a single test only</a></li></ul></nav></div></main><div class=footer><a href=https://hexops.com/privacy>Privacy matters</a><p><a href=https://github.com/hexops/machengine.org/archive/refs/heads/gh-pages.zip>offline version of this site</a> | <a href=https://machengine.org//about#improve-this-site>Improve this site</a> | <a href=https://github.com/sponsors/slimsag>Sponsor on GitHub</a> | <a href=https://devlog.hexops.com/>Hexops' devlog</a></p></div></div></body></html>